PROMPT COMPLET √Ä ENVOYER √Ä REPLIT
Je veux corriger le webhook OxaPay dans mon backend Node.js (Express). 
Actuellement, OxaPay re√ßoit bien un code 200 mais ma commande reste "En attente". 
Je veux que quand le webhook envoie "status": "Completed", la commande passe automatiquement en "paid".

Merci de g√©n√©rer un code COMPLET, pr√™t √† √™tre coll√© dans mon projet Express, avec :

1. Le middleware Express pour lire le JSON : app.use(express.json())
2. Une route POST /api/oxapay/webhook
3. Lecture du JSON envoy√© par OxaPay
4. V√©rification : si data.status === "Completed"
5. R√©cup√©ration de : data.invoice_id
6. Appel d‚Äôune fonction async updateOrderStatus(invoiceId, "paid")
7. Un mod√®le de fonction updateOrderStatus(invoiceId, status) √† personnaliser selon ma base de donn√©es
8. Des logs pour voir ce que j‚Äôai re√ßu
9. Toujours renvoyer res.sendStatus(200)

Voici le code √† g√©n√©rer :

// ------------------ Middleware JSON ------------------
app.use(express.json());

// ------------------ Route Webhook OxaPay ------------------
app.post("/api/oxapay/webhook", async (req, res) => {
  try {
    const data = req.body;

    console.log("Webhook OxaPay re√ßu :", data);

    // V√©rifier que le paiement est compl√©t√©
    if (data.status === "Completed") {

      const invoiceId = data.invoice_id;

      console.log("Paiement confirm√© pour la facture :", invoiceId);

      // Mettre √† jour la commande
      await updateOrderStatus(invoiceId, "paid");

      console.log(`Commande mise √† jour : ${invoiceId} => paid`);
    } else {
      console.log("Webhook re√ßu avec un statut non final :", data.status);
    }

    // Toujours renvoyer 200
    res.sendStatus(200);

  } catch (error) {
    console.error("Erreur Webhook OxaPay :", error);
    res.sendStatus(500);
  }
});


// ------------------ Fonction √† adapter ------------------
async function updateOrderStatus(invoiceId, status) {
  /*
    üí° MODIFIER CETTE PARTIE SELON TA BASE DE DONN√âES

    Exemple MongoDB :
      await Orders.updateOne({ oxapay_invoice_id: invoiceId }, { status });

    Exemple JSON file :
      const orders = JSON.parse(fs.readFileSync("./orders.json"));
      orders[invoiceId].status = status;
      fs.writeFileSync("./orders.json", JSON.stringify(orders));

    Exemple SQL :
      await db.query("UPDATE orders SET status=? WHERE oxapay_invoice_id=?", [status, invoiceId]);

    Pour l‚Äôinstant on met juste un console.log :
  */

  console.log(`[updateOrderStatus] Mise √† jour simul√©e : ${invoiceId} => ${status}`);
}

Merci de me g√©n√©rer le fichier complet dans un style propre.