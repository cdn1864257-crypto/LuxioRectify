PROMPT REPLIT ‚Äî RGPD, Cookies, JWT & S√©curit√© HTTPS compl√®te pour luxiomarket.shop

üß† OBJECTIF

Mettre le site Luxio Market (frontend React sur Vercel, backend Node.js/Express sur Render) en conformit√© totale RGPD, renforcer la s√©curit√© HTTPS, v√©rifier la gestion des cookies et la s√©curisation des JWT, et g√©n√©rer un rapport d‚Äôaudit de conformit√©.

Domaine principal :
https://luxiomarket.shop
Sous-domaine backend :
https://api.luxiomarket.shop


---

üîê 1Ô∏è‚É£ ‚Äî S√©curit√© et conformit√© HTTPS

Forcer toutes les connexions en HTTPS.

Ajouter les headers de s√©curit√© via Helmet :

app.use(helmet({
  contentSecurityPolicy: false,
  crossOriginEmbedderPolicy: false,
}));
app.use((req, res, next) => {
  res.setHeader("Strict-Transport-Security", "max-age=31536000; includeSubDomains");
  res.setHeader("X-Frame-Options", "DENY");
  res.setHeader("X-Content-Type-Options", "nosniff");
  res.setHeader("Referrer-Policy", "strict-origin-when-cross-origin");
  next();
});

V√©rifier que toutes les ressources (API, images, scripts) utilisent https://.



---

üç™ 2Ô∏è‚É£ ‚Äî V√©rification et gestion des cookies

Scanner le projet pour identifier tous les cookies utilis√©s (authentification, consentement, tracking, session).

D√©terminer si ces cookies sont :

essentiels (authentification, session),

optionnels (analytics, consentement).


Tester la suppression des cookies non essentiels et v√©rifier si le site fonctionne sans eux.

Si possible, proposer une alternative sans cookies (ex : stockage JWT c√¥t√© serveur + session s√©curis√©e) sans alt√©rer l‚Äôint√©grit√© du site.

Tous les cookies conserv√©s doivent avoir :

Secure: true,
HttpOnly: true,
SameSite: "Strict" ou "Lax",

G√©n√©rer un COOKIE_AUDIT_REPORT.md :

Liste de tous les cookies d√©tect√©s

Leur utilit√©

R√©sultat des tests avec/sans cookies

Recommandations




---

üîë 3Ô∏è‚É£ ‚Äî JWT (Authentification)

V√©rifier la s√©curit√© du syst√®me JWT :

Sign√© avec JWT_SECRET (d√©j√† configur√© dans Render)

Non stock√© en localStorage ‚Üí doit √™tre en cookie HTTPOnly + Secure

V√©rification de validit√© √† chaque requ√™te API

Rafra√Æchissement automatique (refresh token)

Suppression s√©curis√©e du cookie JWT √† la d√©connexion


Standardiser les erreurs JWT (401/403) avec messages multilingues.



---

üá™üá∫ 4Ô∏è‚É£ ‚Äî Conformit√© RGPD

Ajouter ou v√©rifier la banni√®re de consentement aux cookies (accepter/refuser avant stockage).

Cr√©er les pages suivantes :

Politique de confidentialit√©

Mentions l√©gales


Ajouter dans le tableau de bord utilisateur :

Droit √† l‚Äôoubli (suppression compte et donn√©es)

Export des donn√©es personnelles


Enregistrer le consentement via un cookie sign√© (consent=true/false).

Multilingue : afficher les messages RGPD dans la langue active du site.



---

üßæ 5Ô∏è‚É£ ‚Äî Rapport final automatis√©

G√©n√©rer un fichier GDPR_COMPLIANCE_REPORT.md contenant :

R√©sum√© complet des v√©rifications (HTTPS, JWT, cookies, RGPD)

Liste des fichiers modifi√©s

Tests de suppression des cookies

√âtat du consentement utilisateur

Recommandations finales (ex : cookies non n√©cessaires, corrections possibles)



---

‚úÖ R√âSULTAT ATTENDU

HTTPS activ√© et headers de s√©curit√© conformes

Aucun cookie inutile (ou suppression possible sans bug)

JWT s√©curis√© et conforme RGPD

Banni√®re de consentement multilingue

Droit √† l‚Äôoubli et export de donn√©es disponibles

Rapport complet d‚Äôaudit g√©n√©r√© :

COOKIE_AUDIT_REPORT.md

GDPR_COMPLIANCE_REPORT.md
