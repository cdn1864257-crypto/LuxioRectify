Je veux que tu m‚Äôimpl√©mentes un syst√®me complet de d√©connexion automatique dans mon site full-stack JavaScript (React + Node.js + Express + JWT).

üéØ OBJECTIFS DU SYST√àME

Impl√©menter deux types de d√©connexion automatique :

1. D√©connexion automatique quand le JWT expire
R√®gles :

Au login, g√©n√©rer un JWT avec une expiration configurable (ex : "1h").

Le backend doit renvoyer 401 Unauthorized quand le token est expir√©.

Le frontend doit :

intercepter les r√©ponses 401,

supprimer le token du localStorage,

rediriger vers /login.

Backend :

Je veux :

un middleware Express verifyToken compl√®tement cod√©

gestion propre de l‚Äôerreur TokenExpiredError

r√©ponse JSON standardis√©e

2. D√©connexion automatique pour inactivit√© (Idle Timeout)
R√®gles :

Apr√®s X minutes sans interaction : d√©connexion automatique.

Activit√©s consid√©r√©es :

mousemove

keydown

click

Le timer doit se r√©initialiser √† chaque action.

√Ä l‚Äôexpiration :

supprimer le token

rediriger vers /login.

Frontend :

Je veux :

un hook React useAutoLogout(timeout)

fichier complet et fonctionnel

utilisation dans App.jsx

timer propre + cleanup

compatible axios interceptors

3. Intercepteur Axios global

Je veux un fichier axiosConfig.js qui :

intercepte les r√©ponses 401

d√©clenche le logout

redirige automatiquement vers /login

4. Int√©gration compl√®te

Je veux que tu me fournes :

‚úî Backend (Express + JWT)

authController.js avec g√©n√©ration de token expirant

verifyToken.js middleware complet

exemple de route prot√©g√©e

messages d‚Äôerreur clairs

‚úî Frontend (React)

useAutoLogout.js hook complet

configuration axios avec interceptors

exemple d‚Äôint√©gration dans App.jsx

exemple de page Login.jsx utilisant le token

exemple de d√©connexion manuelle (logout())

5. Livrables attendus

Je veux que tu me donnes :

üîπ Le code complet et pr√™t √† int√©grer :

backend : tous les fichiers n√©cessaires

frontend : tous les fichiers n√©cessaires

structure des dossiers

instructions d‚Äôinstallation et d‚Äôint√©gration

üîπ Le workflow final :

connexion ‚Üí token avec expiration

activit√© ‚Üí timer reset

inactivit√© ‚Üí auto logout

token expir√© ‚Üí auto logout via axios

redirection automatique vers /login

üîπ Aucune donn√©e fictive

Code r√©el et fonctionnel.

6. Style attendu

Code comment√© et compr√©hensible

Pas de pseudo-code

Enti√®rement ex√©cutable

Modern JS (ESModules)

Bonne organisation du projet

Merci de g√©n√©rer tout le code complet, propre, bien structur√©, pr√™t √† √™tre copi√© dans mon projet full-stack JavaScript.